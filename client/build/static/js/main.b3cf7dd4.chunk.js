(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{19:function(e,t,a){e.exports=a(30)},24:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),c=a(17),o=a.n(c),r=(a(24),a(4)),i=function(){return l.a.createElement("nav",null,l.a.createElement("div",{className:"nav-wrapper"},l.a.createElement(r.b,{to:"/",className:"brand-logo left"},"Social Media"),l.a.createElement("ul",{id:"nav-mobile",className:"right"},l.a.createElement("li",null,l.a.createElement(r.b,{to:"/Signin"},"LogIn")),l.a.createElement("li",null,l.a.createElement(r.b,{to:"/Signup"},"SignUp")),l.a.createElement("li",null,l.a.createElement(r.b,{to:"/Profile"},"Profile")),l.a.createElement("li",null,l.a.createElement(r.b,{to:"/create"},"Create Post")))))},s=(a(29),a(3)),u=a(1),m=a(7),p=a.n(m),h=function(){var e=Object(u.e)(),t=Object(n.useState)([]),a=Object(s.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)(""),i=Object(s.a)(r,2),m=i[0],h=i[1];Object(n.useEffect)((function(){fetch("/allpost",{method:"get"}).then((function(e){return e.json()})).then((function(e){console.log(e),o(e.posts)})).catch((function(e){console.log(e)}))}),[]);var d=function(t){var a=JSON.parse(localStorage.getItem("user"));a.name,a._id;fetch("/comment",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({comment:m,userName:a.name,userId:a._id,postId:t})}).then((function(e){return e.json()})).then((function(t){t.error?p.a.toast({html:t.error}):(p.a.toast({html:t.message}),e.push("/"))})).catch((function(e){return console.log(e)}))};return l.a.createElement("div",{className:"home"},c.map((function(e){return l.a.createElement("div",{className:"card home-card",key:e._id},l.a.createElement("h5",null,e.postedBy.name),l.a.createElement("div",{className:"card-image"},l.a.createElement("img",{src:e.photo})),l.a.createElement("h6",null,"Comments:"),e.comments.map((function(e){return l.a.createElement("p",null,l.a.createElement("strong",null,e.userName),l.a.createElement("br",null),e.comment)})),l.a.createElement("div",{className:"card-content"},l.a.createElement("h5",null,e.title),l.a.createElement("p",null,e.body),l.a.createElement("input",{type:"text",placeholder:"add a comment",value:m,onChange:function(e){h(e.target.value)}}),l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action",onClick:d.bind(void 0,e._id)},"Submit")))})))},d=function(){var e=Object(u.e)(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),m=Object(s.a)(i,2),h=m[0],d=m[1];return l.a.createElement("div",null,l.a.createElement("div",{className:"card auth-card"},l.a.createElement("h2",null,"Sign In"),l.a.createElement("input",{type:"text",placeholder:"email",value:h,onChange:function(e){d(e.target.value)}}),l.a.createElement("input",{type:"text",placeholder:"password",value:c,onChange:function(e){o(e.target.value)}}),l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action",onClick:function(){fetch("/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:c,email:h})}).then((function(e){return e.json()})).then((function(t){console.log(t),t.error?p.a.toast({html:t.error}):(localStorage.setItem("jwt",t.token),localStorage.setItem("user",JSON.stringify(t.user)),p.a.toast({html:"signed in successfully"}),e.push("/"))})).catch((function(e){return console.log(e)}))}},"Sign In"),l.a.createElement("h5",null,l.a.createElement(r.b,{to:"/signup"},"Already have an account?"))))},f=function(){var e=Object(u.e)(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],i=Object(n.useState)(""),m=Object(s.a)(i,2),h=m[0],d=m[1],f=Object(n.useState)(""),g=Object(s.a)(f,2),E=g[0],b=g[1];return l.a.createElement("div",null,l.a.createElement("div",{className:"card auth-card"},l.a.createElement("h2",null,"Sign Up"),l.a.createElement("input",{type:"text",placeholder:"name",value:c,onChange:function(e){o(e.target.value)}}),l.a.createElement("input",{type:"text",placeholder:"email",value:E,onChange:function(e){b(e.target.value)}}),l.a.createElement("input",{type:"text",placeholder:"password",value:h,onChange:function(e){d(e.target.value)}}),l.a.createElement("button",{className:"btn waves-effect waves-light",type:"submit",name:"action",onClick:function(){fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:c,password:h,email:E})}).then((function(e){return e.json()})).then((function(t){t.error?p.a.toast({html:t.error}):(p.a.toast({html:t.message}),e.push("/signin"))})).catch((function(e){return console.log(e)}))}},"Sign up"),l.a.createElement("h5",null,l.a.createElement(r.b,{to:"/signin"},"Already have an account?"))))},g=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],c=t[1],o=JSON.parse(localStorage.getItem("user"));return Object(n.useEffect)((function(){fetch("/mypost",{method:"get",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e.mypost),c(e.mypost)})).catch((function(e){console.log(e)}))}),[]),l.a.createElement("div",{style:{maxWidth:"550px",margin:"0px auto"}},l.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",margin:"18px 0px",borderBottom:"1px solid grey"}},l.a.createElement("div",null,l.a.createElement("h4",null,o.name),l.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",width:"108%"}},l.a.createElement("h6",null,a.length," posts")))),a.map((function(e){return l.a.createElement("img",{className:"item",src:e.photo})})))},E=function(){var e=Object(u.e)(),t=Object(n.useState)(""),a=Object(s.a)(t,2),c=a[0],o=a[1],r=Object(n.useState)(""),i=Object(s.a)(r,2),m=i[0],h=i[1],d=Object(n.useState)(""),f=Object(s.a)(d,2),g=f[0],E=f[1],b=Object(n.useState)(""),v=Object(s.a)(b,2),y=v[0],j=v[1];Object(n.useEffect)((function(){y&&fetch("/createpost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:c,body:m,pic:y})}).then((function(e){return e.json()})).then((function(t){t.error?p.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(p.a.toast({html:"Created post Successfully",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))}),[y]);return l.a.createElement("div",{className:"card input-filed",style:{margin:"30px auto",maxWidth:"500px",padding:"20px",textAlign:"center"}},l.a.createElement("input",{type:"text",placeholder:"title",value:c,onChange:function(e){return o(e.target.value)}}),l.a.createElement("input",{type:"text",placeholder:"body",value:m,onChange:function(e){return h(e.target.value)}}),l.a.createElement("div",{className:"file-field input-field"},l.a.createElement("div",{className:"btn #64b5f6 blue darken-1"},l.a.createElement("span",null," Uplaod Image "),l.a.createElement("input",{type:"file",onChange:function(e){return E(e.target.files[0])}})),l.a.createElement("div",{className:"file-path-wrapper"},l.a.createElement("input",{className:"file-path validate",type:"text"}))),l.a.createElement("button",{className:"btn waves-effect waves-light #64b5f6 blue darken-1",onClick:function(){var e=new FormData;e.append("file",g),e.append("upload_preset","socialmedia"),e.append("cloud_name","sayansingha"),fetch("https://api.cloudinary.com/v1_1/sayansingha/image/upload",{method:"post",body:e}).then((function(e){return e.json()})).then((function(e){j(e.url)})).catch((function(e){console.log(e)}))}},"Submit post "))};var b=function(){return l.a.createElement(r.a,null,l.a.createElement(i,null),l.a.createElement(u.a,{exact:!0,path:"/"},l.a.createElement(h,null)),l.a.createElement(u.a,{path:"/signin"},l.a.createElement(d,null)),l.a.createElement(u.a,{path:"/signup"},l.a.createElement(f,null)),l.a.createElement(u.a,{path:"/profile"},l.a.createElement(g,null)),l.a.createElement(u.a,{path:"/create"},l.a.createElement(E,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[19,1,2]]]);
//# sourceMappingURL=main.b3cf7dd4.chunk.js.map